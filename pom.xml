<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.nokia.nsw.uiv.setar</groupId>
    <artifactId>setar</artifactId>
    <version>24.11.0-1039</version>
    <name>setar</name>
    <description>Generated by uiv-codegen</description>
    <url>http://maven.apache.org</url>
    <parent>
        <groupId>com.nokia.nsw.uiv</groupId>
        <artifactId>uiv-sdk-parent</artifactId>
        <version>24.11.0-1039</version>
    </parent>
    <properties>
	 <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <techtemplate.name>setar</techtemplate.name>
        <techtemplate.api.version>v1</techtemplate.api.version>
        <maven.dependency.plugin.version>3.6.0</maven.dependency.plugin.version>
        <dockerfile-maven.version>1.4.10</dockerfile-maven.version>
        <jar.name>${project.build.finalName}.jar</jar.name>
        <java.version>17</java.version>
        <swagger2markup.version>1.2.0</swagger2markup.version>
        <jackson.version>2.15.2</jackson.version>
        <release.build>false</release.build>
	<confluent.maven.repo>http://packages.confluent.io/maven/</confluent.maven.repo>
    </properties>

    <packaging>pom</packaging>
    <dependencyManagement>
        <dependencies>
            <!-- Force compatible Jackson version for UIV plugin -->
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-core</artifactId>
                <version>2.15.2</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-databind</artifactId>
                <version>2.15.2</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-annotations</artifactId>
                <version>2.15.2</version>
            </dependency>
        </dependencies>
    </dependencyManagement>


    <modules>
		<module>setar-model</module> 
		<module>setar-solution</module>		
	</modules>
	
	<repositories>		
		<repository>		
			<id>confluent</id>			
			<name>Confluent</name>			
			<url>${confluent.maven.repo}</url>		
		</repository>	
	</repositories>		

	<distributionManagement>
        	<repository>
            		<id>repository</id>
			<name>${repo.key}</name>
			<url>${repository.url}/${repo.key}</url>
        	</repository>
	</distributionManagement>

	<build>
	<pluginManagement>
            <plugins>
		<plugin>
                    <groupId>org.jfrog.buildinfo</groupId>
                    <artifactId>artifactory-maven-plugin</artifactId>
                    <version>3.6.1</version>
                    <inherited>false</inherited>
                    <executions>
                        <execution>
                            <id>build-info</id>
                            <goals>
                                <goal>publish</goal>
                            </goals>
                            <configuration>
                                <deployProperties>
                                </deployProperties>
                                <publisher>
					<contextUrl>${repository.url}</contextUrl>
                                    <username>${artifactory.username}</username>
                                    <password>${artifactory.password}</password>
				    <repoKey>${repo.key}</repoKey>
                                </publisher>
                                <buildInfo>
                                    <buildNumber>{{BUILD_NUMBER}}</buildNumber>
                                    <buildUrl>{{BUILD_URL}}</buildUrl>
                                </buildInfo>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

            </plugins>
    </pluginManagement>
    </build>
	

	<profiles>
	<profile>
            <id>run-local</id>
            <activation>
                <property><name>!release.build</name></property>
            </activation>


	<build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <version>3.6.0</version>
                        <executions>
                            <execution>
                                <id>unpack</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <!--artifactItem>
                                            <groupId>com.nokia.nsw.uiv.setar</groupId>
                                            <artifactId>setar-model</artifactId>
                                            <version>24.11.0-1039</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.basedir}/target/uiv-lib</outputDirectory>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>com.nokia.nsw.uiv.setar</groupId>
                                            <artifactId>setar-solution</artifactId>
                                            <version>24.11.0-1039</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.basedir}/target/uiv-lib</outputDirectory>
                                        </artifactItem-->
										
					<artifactItem>
						<groupId>com.nokia.nsw.uiv</groupId>
						<artifactId>uiv-runtime</artifactId>
						<version>24.11.0-1039</version>
						<type>jar</type>
						<overWrite>false</overWrite>
						<outputDirectory>${project.basedir}/target</outputDirectory>
					</artifactItem>
										
                                    </artifactItems>
                                    <overWriteReleases>false</overWriteReleases>
                                    <overWriteSnapshots>false</overWriteSnapshots>
                                </configuration>
                            </execution>
                        </executions>
		</plugin>
		<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>3.3.1</version>
                <executions>                    
                    <execution>
			    <id>copy-run-scripts</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <overwrite>true</overwrite>
                            <outputDirectory>${project.basedir}/target</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>${project.basedir}/scripts</directory>
                                    <includes>
					    <include>*.sh</include>
					    <include>*.cmd</include>
                                    </includes>
                                </resource>
                            </resources>
                        </configuration>
		</execution>
               </executions>
            </plugin>
	</plugins>
</build>
</profile>
</profiles>

</project>
